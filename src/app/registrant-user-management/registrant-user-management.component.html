<div class="layout-container">
    <app-side-menu></app-side-menu>
    <div class="content-area">
      <app-main-header></app-main-header>
      <div class="container-fluid">
        <div class="row" style="padding-top: 100px;">
          <div class="col-sm-12">
            <div class="button-svg-container">
              <h3> <button id="addUser" class="btn btn-primary" (click)="verifyOnBoardingStatus()">Add User</button></h3>
              <button hidden="true" id="addUser1" data-toggle="modal" data-target="#userModal"></button>
              <svg width="102" height="35" viewBox="0 0 102 35" fill="red" xmlns="http://www.w3.org/2000/svg">
                <rect width="102" height="35" rx="3" fill="background: #EF3333;
                    " />
                <path d="M18.25 13H19.75H31.75" stroke="white" stroke-linecap="round" stroke-linejoin="round" />
                <path
                  d="M30.25 13V23.5C30.25 23.8978 30.092 24.2794 29.8107 24.5607C29.5294 24.842 29.1478 25 28.75 25H21.25C20.8522 25 20.4706 24.842 20.1893 24.5607C19.908 24.2794 19.75 23.8978 19.75 23.5V13M22 13V11.5C22 11.1022 22.158 10.7206 22.4393 10.4393C22.7206 10.158 23.1022 10 23.5 10H26.5C26.8978 10 27.2794 10.158 27.5607 10.4393C27.842 10.7206 28 11.1022 28 11.5V13"
                  stroke="white" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M23.5 16.75V21.25" stroke="white" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M26.5 16.75V21.25" stroke="white" stroke-linecap="round" stroke-linejoin="round" />
                <path
                  d="M44.3984 23H42.0234L42.0391 21.7734H44.3984C45.2109 21.7734 45.888 21.6042 46.4297 21.2656C46.9714 20.9219 47.3776 20.4427 47.6484 19.8281C47.9245 19.2083 48.0625 18.4844 48.0625 17.6562V16.9609C48.0625 16.3099 47.9844 15.7318 47.8281 15.2266C47.6719 14.7161 47.4427 14.2865 47.1406 13.9375C46.8385 13.5833 46.4688 13.3151 46.0312 13.1328C45.599 12.9505 45.1016 12.8594 44.5391 12.8594H41.9766V11.625H44.5391C45.2839 11.625 45.9635 11.75 46.5781 12C47.1927 12.2448 47.7214 12.6016 48.1641 13.0703C48.612 13.5339 48.9557 14.0964 49.1953 14.7578C49.4349 15.4141 49.5547 16.1536 49.5547 16.9766V17.6562C49.5547 18.4792 49.4349 19.2214 49.1953 19.8828C48.9557 20.5391 48.6094 21.099 48.1562 21.5625C47.7083 22.026 47.1667 22.3828 46.5312 22.6328C45.901 22.8776 45.1901 23 44.3984 23ZM42.8281 11.625V23H41.3203V11.625H42.8281ZM55.1094 23.1562C54.5208 23.1562 53.987 23.0573 53.5078 22.8594C53.0339 22.6562 52.625 22.3724 52.2812 22.0078C51.9427 21.6432 51.6823 21.2109 51.5 20.7109C51.3177 20.2109 51.2266 19.6641 51.2266 19.0703V18.7422C51.2266 18.0547 51.3281 17.4427 51.5312 16.9062C51.7344 16.3646 52.0104 15.9062 52.3594 15.5312C52.7083 15.1562 53.1042 14.8724 53.5469 14.6797C53.9896 14.487 54.4479 14.3906 54.9219 14.3906C55.526 14.3906 56.0469 14.4948 56.4844 14.7031C56.9271 14.9115 57.2891 15.2031 57.5703 15.5781C57.8516 15.9479 58.0599 16.3854 58.1953 16.8906C58.3307 17.3906 58.3984 17.9375 58.3984 18.5312V19.1797H52.0859V18H56.9531V17.8906C56.9323 17.5156 56.8542 17.151 56.7188 16.7969C56.5885 16.4427 56.3802 16.151 56.0938 15.9219C55.8073 15.6927 55.4167 15.5781 54.9219 15.5781C54.5938 15.5781 54.2917 15.6484 54.0156 15.7891C53.7396 15.9245 53.5026 16.1276 53.3047 16.3984C53.1068 16.6693 52.9531 17 52.8438 17.3906C52.7344 17.7812 52.6797 18.2318 52.6797 18.7422V19.0703C52.6797 19.4714 52.7344 19.849 52.8438 20.2031C52.9583 20.5521 53.1224 20.8594 53.3359 21.125C53.5547 21.3906 53.8177 21.599 54.125 21.75C54.4375 21.901 54.7917 21.9766 55.1875 21.9766C55.6979 21.9766 56.1302 21.8724 56.4844 21.6641C56.8385 21.4557 57.1484 21.1771 57.4141 20.8281L58.2891 21.5234C58.1068 21.7995 57.875 22.0625 57.5938 22.3125C57.3125 22.5625 56.9661 22.7656 56.5547 22.9219C56.1484 23.0781 55.6667 23.1562 55.1094 23.1562ZM61.6562 11V23H60.2031V11H61.6562ZM67.4844 23.1562C66.8958 23.1562 66.362 23.0573 65.8828 22.8594C65.4089 22.6562 65 22.3724 64.6562 22.0078C64.3177 21.6432 64.0573 21.2109 63.875 20.7109C63.6927 20.2109 63.6016 19.6641 63.6016 19.0703V18.7422C63.6016 18.0547 63.7031 17.4427 63.9062 16.9062C64.1094 16.3646 64.3854 15.9062 64.7344 15.5312C65.0833 15.1562 65.4792 14.8724 65.9219 14.6797C66.3646 14.487 66.8229 14.3906 67.2969 14.3906C67.901 14.3906 68.4219 14.4948 68.8594 14.7031C69.3021 14.9115 69.6641 15.2031 69.9453 15.5781C70.2266 15.9479 70.4349 16.3854 70.5703 16.8906C70.7057 17.3906 70.7734 17.9375 70.7734 18.5312V19.1797H64.4609V18H69.3281V17.8906C69.3073 17.5156 69.2292 17.151 69.0938 16.7969C68.9635 16.4427 68.7552 16.151 68.4688 15.9219C68.1823 15.6927 67.7917 15.5781 67.2969 15.5781C66.9688 15.5781 66.6667 15.6484 66.3906 15.7891C66.1146 15.9245 65.8776 16.1276 65.6797 16.3984C65.4818 16.6693 65.3281 17 65.2188 17.3906C65.1094 17.7812 65.0547 18.2318 65.0547 18.7422V19.0703C65.0547 19.4714 65.1094 19.849 65.2188 20.2031C65.3333 20.5521 65.4974 20.8594 65.7109 21.125C65.9297 21.3906 66.1927 21.599 66.5 21.75C66.8125 21.901 67.1667 21.9766 67.5625 21.9766C68.0729 21.9766 68.5052 21.8724 68.8594 21.6641C69.2135 21.4557 69.5234 21.1771 69.7891 20.8281L70.6641 21.5234C70.4818 21.7995 70.25 22.0625 69.9688 22.3125C69.6875 22.5625 69.3411 22.7656 68.9297 22.9219C68.5234 23.0781 68.0417 23.1562 67.4844 23.1562ZM76 14.5469V15.6562H71.4297V14.5469H76ZM72.9766 12.4922H74.4219V20.9062C74.4219 21.1927 74.4661 21.4089 74.5547 21.5547C74.6432 21.7005 74.7578 21.7969 74.8984 21.8438C75.0391 21.8906 75.1901 21.9141 75.3516 21.9141C75.4714 21.9141 75.5964 21.9036 75.7266 21.8828C75.862 21.8568 75.9635 21.8359 76.0312 21.8203L76.0391 23C75.9245 23.0365 75.7734 23.0703 75.5859 23.1016C75.4036 23.138 75.1823 23.1562 74.9219 23.1562C74.5677 23.1562 74.2422 23.0859 73.9453 22.9453C73.6484 22.8047 73.4115 22.5703 73.2344 22.2422C73.0625 21.9089 72.9766 21.4609 72.9766 20.8984V12.4922ZM81.2031 23.1562C80.6146 23.1562 80.0807 23.0573 79.6016 22.8594C79.1276 22.6562 78.7188 22.3724 78.375 22.0078C78.0365 21.6432 77.776 21.2109 77.5938 20.7109C77.4115 20.2109 77.3203 19.6641 77.3203 19.0703V18.7422C77.3203 18.0547 77.4219 17.4427 77.625 16.9062C77.8281 16.3646 78.1042 15.9062 78.4531 15.5312C78.8021 15.1562 79.1979 14.8724 79.6406 14.6797C80.0833 14.487 80.5417 14.3906 81.0156 14.3906C81.6198 14.3906 82.1406 14.4948 82.5781 14.7031C83.0208 14.9115 83.3828 15.2031 83.6641 15.5781C83.9453 15.9479 84.1536 16.3854 84.2891 16.8906C84.4245 17.3906 84.4922 17.9375 84.4922 18.5312V19.1797H78.1797V18H83.0469V17.8906C83.026 17.5156 82.9479 17.151 82.8125 16.7969C82.6823 16.4427 82.474 16.151 82.1875 15.9219C81.901 15.6927 81.5104 15.5781 81.0156 15.5781C80.6875 15.5781 80.3854 15.6484 80.1094 15.7891C79.8333 15.9245 79.5964 16.1276 79.3984 16.3984C79.2005 16.6693 79.0469 17 78.9375 17.3906C78.8281 17.7812 78.7734 18.2318 78.7734 18.7422V19.0703C78.7734 19.4714 78.8281 19.849 78.9375 20.2031C79.0521 20.5521 79.2161 20.8594 79.4297 21.125C79.6484 21.3906 79.9115 21.599 80.2188 21.75C80.5312 21.901 80.8854 21.9766 81.2812 21.9766C81.7917 21.9766 82.224 21.8724 82.5781 21.6641C82.9323 21.4557 83.2422 21.1771 83.5078 20.8281L84.3828 21.5234C84.2005 21.7995 83.9688 22.0625 83.6875 22.3125C83.4062 22.5625 83.0599 22.7656 82.6484 22.9219C82.2422 23.0781 81.7604 23.1562 81.2031 23.1562Z"
                  fill="white" />
              </svg>
            </div>
  
            <section class="example-container" style="margin-top: 10px;">
              <table id="table1" mat-table [dataSource]="usersDataSource" matSort class="mat-elevation-z8">
  
                <ng-container matColumnDef="checkbox">
                  <th mat-header-cell *matHeaderCellDef>
                    <input type="checkbox" id="mainCheckBox" />
                  </th>
                  <td mat-cell *matCellDef="let user; let i = index">
                    <input type="checkbox" id="subCheckBox{{i}}" class="subCheckBox" value="{{i}}" />
                  </td>
                </ng-container>
  
  
                <ng-container matColumnDef="id">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Sl.No</th>
                  <td (click)="navigateToDomainDetails(user.userId)" mat-cell *matCellDef="let user; let i = index">
                    {{user.id}}</td>
                </ng-container>
  
  
                <ng-container matColumnDef="userId">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>User Id</th>
                  <td mat-cell *matCellDef="let user">{{user.userId}}</td>
                </ng-container>
  
  
                <ng-container matColumnDef="userName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>User Name</th>
                  <td mat-cell *matCellDef="let user">{{user.userName}}</td>
                </ng-container>
  
                <ng-container matColumnDef="institutionName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Organisation Name</th>
                  <td mat-cell *matCellDef="let user">{{user.organisationDetailsDto.institutionName}}</td>
                </ng-container>
  
  
                <ng-container matColumnDef="role">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
                  <td mat-cell *matCellDef="let user">{{user.role}}</td>
                </ng-container>
  
                <ng-container *ngIf="role === 'IDRBTADMIN'" matColumnDef="access">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Access</th>
                  <td mat-cell *matCellDef="let user">
                    <mat-slide-toggle color="primary" [checked]="user.active"
                     (change)="onAccessToggle($event, user)">
                    </mat-slide-toggle>
                  </td>
                </ng-container>
  
                <ng-container matColumnDef="active">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
                  <td mat-cell *matCellDef="let user">{{ user.active ? 'Active' : 'Inactive' }}</td>
                </ng-container>
  
  
                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Actions</th>
                  <td mat-cell *matCellDef="let user">
                    <div>
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path
                          d="M12 3H5C4.46957 3 3.96086 3.21071 3.58579 3.58579C3.21071 3.96086 3 4.46957 3 5V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21H19C19.5304 21 20.0391 20.7893 20.4142 20.4142C20.7893 20.0391 21 19.5304 21 19V12"
                          stroke="#9A9A9A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path
                          d="M18.3751 2.62523C18.7729 2.2274 19.3125 2.00391 19.8751 2.00391C20.4377 2.00391 20.9773 2.2274 21.3751 2.62523C21.7729 3.02305 21.9964 3.56262 21.9964 4.12523C21.9964 4.68784 21.7729 5.2274 21.3751 5.62523L12.3621 14.6392C12.1246 14.8765 11.8313 15.0501 11.5091 15.1442L8.63609 15.9842C8.55005 16.0093 8.45883 16.0108 8.372 15.9886C8.28517 15.9663 8.20592 15.9212 8.14254 15.8578C8.07916 15.7944 8.03398 15.7151 8.01174 15.6283C7.98949 15.5415 7.991 15.4503 8.01609 15.3642L8.85609 12.4912C8.95062 12.1693 9.12463 11.8763 9.36209 11.6392L18.3751 2.62523Z"
                          stroke="#9A9A9A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                          (click)="getUserById(user.id)" style="cursor: pointer;" data-toggle="modal"
                          data-target="#userModal" />
                      </svg>&nbsp;
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M3 6H5H21" stroke="#ED6A5E" stroke-width="2" stroke-linecap="round"
                          stroke-linejoin="round" />
                        <path
                          d="M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6"
                          stroke="#ED6A5E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        <path d="M10 11V17" stroke="#ED6A5E" stroke-width="2" stroke-linecap="round"
                          stroke-linejoin="round" />
                        <path d="M14 11V17" stroke="#ED6A5E" stroke-width="2" stroke-linecap="round"
                          stroke-linejoin="round" style="cursor: pointer;" (click)="deleteUserById(user.id)" />
                      </svg>
                    </div>
                  </td>
                </ng-container>
  
  
  
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </section>
            <mat-paginator style="font-size: 13px;" [pageSizeOptions]="[5, 10, 20 ]" showFirstLastButtons [pageSize]="10"
              aria-label="Select page of periodic elements">
            </mat-paginator>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="modal" id="userModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header" style=" background: #EDECFC; color: #000000;
  
  ">
          <h5 class="modal-title" style="font-size: 16px;">User</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true" (click)="clearData()">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!--  -->
          <p>Name <span class="required">*</span></p>
          <div class="name-container">
            <input type="text" class="form-control" [(ngModel)]="user.userName" id="name"
              placeholder="Enter your full name" (blur)="nameChange()" (input)="nameChange()" />
          </div>
          <div *ngIf="!nameInput" class="error-message">{{ nameErrorMessage }}</div>
          <br />
          <div id="email">
            <p>Email ID <span class="required">*</span></p>
            <div class="input-group">
              <input type="email" placeholder="Enter your email id" class="form-control" [(ngModel)]="user.userId"
                (blur)="emailChange()" (input)="toggleEmailButton()" />
  
            </div>
            <div *ngIf="!emailInput" class="error-message">{{ emailerrorMessage }}</div>
          </div>
          <br />
          <div id="mobile-number">
            <p>Mobile Number <span class="required">*</span></p>
            <div class="input-group">
              <input type="text" placeholder="+91 Enter your number" maxlength="10" class="form-control"
                [(ngModel)]="user.mobileNumber" (blur)="numberChange()" (input)="toggleNumberButton()" />
  
            </div>
            <div *ngIf="!numberInput" class="error-message">{{ numbererrorMessage }}</div>
          </div>
  
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" style="margin-right: 10px;" (click)="saveOrUpdateUser()">Save
            changes</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="clearData()">Close</button>
        </div>
      </div>
    </div>
  </div>
  