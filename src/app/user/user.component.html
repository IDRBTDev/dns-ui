<div class="layout-container">
    <app-side-menu></app-side-menu>
    <div class="content-area">
      <app-header></app-header>
      <div class="container-fluid">
        <div class="row" style="padding-top: 100px;">
          <div class="col-sm-12">
            <h3> <button class="btn btn-primary" data-toggle="modal"
                data-target="#userModal">Add User</button></h3>
            <section class="example-container" style="margin-top: 10px;">
              <table id="table1" mat-table [dataSource]="usersDataSource" 
              matSort class="mat-elevation-z8">
                <!-- Checkbox Column -->
                <ng-container matColumnDef="checkbox">
                  <th mat-header-cell *matHeaderCellDef >
                    <input type="checkbox" id="mainCheckBox" />
                  </th>
                  <td mat-cell *matCellDef="let user; let i = index">
                    <input type="checkbox" id="subCheckBox{{i}}" class="subCheckBox" value="{{i}}" />
                  </td>
                </ng-container>
  
                <!-- Domain ID Column -->
                <ng-container matColumnDef="id">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Sl.No</th>
                  <td 
                  (click)="navigateToDomainDetails(user.userId)"
                   mat-cell *matCellDef="let user; let i = index">{{user.id}}</td>
                </ng-container>
  
                <!-- Domain Name Column -->
                <ng-container matColumnDef="userId">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>User Id</th>
                  <td mat-cell *matCellDef="let user">{{user.userId}}</td>
                </ng-container>
  
                <!-- Organisation Name Column -->
                <ng-container matColumnDef="userName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>User Name</th>
                  <td mat-cell *matCellDef="let user">{{user.userName}}</td>
                </ng-container>
  
                <!-- Registration Date Column -->
                <ng-container matColumnDef="role">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
                  <td mat-cell *matCellDef="let user">{{user.role}}</td>
                </ng-container>
  
                <!-- Renewal Date Column -->
                <!-- <ng-container matColumnDef="Access">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Access</th>
                  <td mat-cell *matCellDef="let user">{{""}}</td>
                </ng-container> -->
                               <!-- Access Column -->
                               <ng-container matColumnDef="access">
                                <th mat-header-cell *matHeaderCellDef mat-sort-header>Access</th>
                                <td mat-cell *matCellDef="let user">
                                  <mat-slide-toggle
                                    [checked]="user.active"
                                    (change)="onAccessToggle($event, user)">
                                  </mat-slide-toggle>
                                </td>
                              </ng-container>
  
               <!-- Status Column -->
<ng-container matColumnDef="active">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
    <td mat-cell *matCellDef="let user">{{ user.active ? 'Active' : 'Inactive' }}</td>
  </ng-container>
  

                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Actions</th>
                    <td mat-cell *matCellDef="let user">
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M12 3H5C4.46957 3 3.96086 3.21071 3.58579 3.58579C3.21071 3.96086 3 4.46957 3 5V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21H19C19.5304 21 20.0391 20.7893 20.4142 20.4142C20.7893 20.0391 21 19.5304 21 19V12" stroke="#9A9A9A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M18.3751 2.62523C18.7729 2.2274 19.3125 2.00391 19.8751 2.00391C20.4377 2.00391 20.9773 2.2274 21.3751 2.62523C21.7729 3.02305 21.9964 3.56262 21.9964 4.12523C21.9964 4.68784 21.7729 5.2274 21.3751 5.62523L12.3621 14.6392C12.1246 14.8765 11.8313 15.0501 11.5091 15.1442L8.63609 15.9842C8.55005 16.0093 8.45883 16.0108 8.372 15.9886C8.28517 15.9663 8.20592 15.9212 8.14254 15.8578C8.07916 15.7944 8.03398 15.7151 8.01174 15.6283C7.98949 15.5415 7.991 15.4503 8.01609 15.3642L8.85609 12.4912C8.95062 12.1693 9.12463 11.8763 9.36209 11.6392L18.3751 2.62523Z" stroke="#9A9A9A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                (click)="getUserById(user.id)" style="cursor: pointer;"
                                data-toggle="modal" data-target="#userModal"/>
                              </svg>&nbsp;
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M3 6H5H21" stroke="#ED6A5E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6" stroke="#ED6A5E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10 11V17" stroke="#ED6A5E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M14 11V17" stroke="#ED6A5E" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                                style="cursor: pointer;"  (click)="deleteUserById(user.id)"/>
                              </svg>
                        </div>
                    </td>
                  </ng-container>
                  
  
                <!-- Header Row -->
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <!-- Data Rows -->
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
            </section>
            <mat-paginator style="font-size: 13px;" [pageSizeOptions]="[5, 10, 20 ]"
            showFirstLastButtons [pageSize]="10"
            aria-label="Select page of periodic elements">
           </mat-paginator>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="userModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">User</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"
            (click)="clearData()">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <!--  -->
          <p>Name <span class="required">*</span></p>
          <div class="name-container">
              <input type="text" class="form-control" [(ngModel)]="user.userName" id="name" placeholder="Enter your full name"
                  (blur)="nameChange()" (input)="nameChange()" />
          </div>
          <div *ngIf="!nameInput" class="error-message">{{ nameErrorMessage }}</div>
          <br/>
          <div id="email">
              <p>Email ID <span class="required">*</span></p>
              <div class="input-group">
                  <input type="email" placeholder="Enter your email id" class="form-control" [(ngModel)]="user.userId"
                      (blur)="emailChange()" (input)="toggleEmailButton()" />
                  <!-- <button *ngIf="showEmailButton" type="button" class="get-email-btn"
                   id="email-btn"
                   (click)="generateOTPAndVerifyEmail()">Verify</button> -->
              </div>
              <div *ngIf="!emailInput" class="error-message">{{ emailerrorMessage }}</div>
          </div>
          <br/>
          <div id="mobile-number">
              <p>Mobile Number <span class="required">*</span></p>
              <div class="input-group">
                  <input type="text" placeholder="+91 Enter your number" maxlength="10" class="form-control" [(ngModel)]="user.mobileNumber"
                      (blur)="numberChange()" (input)="toggleNumberButton()" />
                  <!-- <button *ngIf="showNumberButton" type="button" class="get-number-btn" id="number-btn">Verify</button> -->
              </div>
              <div *ngIf="!numberInput" class="error-message">{{ numbererrorMessage }}</div>
          </div>
            <!--  -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary"
          (click)="saveOrUpdateUser()">Save changes</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal"
          (click)="clearData()">Close</button>
        </div>
      </div>
    </div>
  </div>
  