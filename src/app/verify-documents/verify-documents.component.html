<div class="layout-container">
    <app-side-menu></app-side-menu>
    <div class="content-area">
      <app-main-header></app-main-header>
      <div class="container-fluid">
        <div class="row" style="padding-top: 100px;">
          <div class="col-sm-12" style="display: flex;">
            <svg style="cursor: pointer;" width="24" height="25" viewBox="0 0 24 25" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path d="M19 12.5H5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M12 19.5L5 12.5L12 5.5" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <h3>Verify Documents</h3>
          </div>
          <div>
            <section class="example-container" style="margin-top: 10px;">
              
                <table id="table1" mat-table [dataSource]="documentsListDataSource" 
                matSort matSortActive="id" class="mat-elevation-z8">
                  <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Id</th>
                    <td style="cursor: pointer;text-decoration: underline;color: blue;" 
                     mat-cell *matCellDef="let document">{{document.contactDocumentId}}</td>
                  </ng-container>

                  <ng-container matColumnDef="document">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Document</th>
                    <td (click)="viewCurrentData(document.aadharDocument, document.aadharNumber)"
                    data-target="#documentView" data-toggle="modal"
                     style="cursor: pointer;text-decoration: underline;color: blue;" 
                     mat-cell *matCellDef="let document">{{document.fileName}}</td>
                  </ng-container>

                  <ng-container matColumnDef="documentType">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Document Type</th>
                    <td
                     mat-cell *matCellDef="let document">{{document.documentType}}</td>
                  </ng-container>

                  <ng-container matColumnDef="approveOrReject">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Approve/Reject</th>
                    <td style="cursor: pointer;text-decoration: underline;color: blue;" 
                     mat-cell *matCellDef="let document">
                     <div *ngIf="document.documentStatus === null">
                      <span class="approved" data-target="#approveCommentModal" data-toggle="modal">
                          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect y="0.5" width="24" height="24" rx="2" fill="#C3FFC3" fill-opacity="0.5"/>
                              <path d="M15 19.25V17.75C15 16.9544 14.6839 16.1913 14.1213 15.6287C13.5587 15.0661 12.7956 14.75 12 14.75H6.75C5.95435 14.75 5.19129 15.0661 4.62868 15.6287C4.06607 16.1913 3.75 16.9544 3.75 17.75V19.25" stroke="#008000" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M9.375 11.75C11.0319 11.75 12.375 10.4069 12.375 8.75C12.375 7.09315 11.0319 5.75 9.375 5.75C7.71815 5.75 6.375 7.09315 6.375 8.75C6.375 10.4069 7.71815 11.75 9.375 11.75Z" stroke="#008000" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M15.75 11.75L17.25 13.25L20.25 10.25" stroke="#008000" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>
                      </span>&nbsp;&nbsp;&nbsp;&nbsp;
                      <span class="rejected" data-target="#rejectCommentModal" data-toggle="modal">
                          <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                              <rect y="0.5" width="24" height="24" rx="2" fill="#FF9393" fill-opacity="0.5"/>
                              <path d="M15 19.25V17.75C15 16.9544 14.6839 16.1913 14.1213 15.6287C13.5587 15.0661 12.7956 14.75 12 14.75H6.75C5.95435 14.75 5.19129 15.0661 4.62868 15.6287C4.06607 16.1913 3.75 16.9544 3.75 17.75V19.25" stroke="#FF0000" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M9.375 11.75C11.0319 11.75 12.375 10.4069 12.375 8.75C12.375 7.09315 11.0319 5.75 9.375 5.75C7.71815 5.75 6.375 7.09315 6.375 8.75C6.375 10.4069 7.71815 11.75 9.375 11.75Z" stroke="#FF0000" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M16.5 9.5L20.25 13.25" stroke="#FF0000" stroke-linecap="round" stroke-linejoin="round"/>
                              <path d="M20.25 9.5L16.5 13.25" stroke="#FF0000" stroke-linecap="round" stroke-linejoin="round"/>
                              </svg>
                      </span>
                  </div>
                  <div *ngIf="document.documentStatus === 'Approved'">{{'Approved'}}</div>
                  <div *ngIf="document.documentStatus === 'Rejected'">{{'Rejected'}}</div>
                    </td>
                  </ng-container>

                  <ng-container matColumnDef="comment">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header>Comment</th>
                    <td
                     mat-cell *matCellDef="let document">{{document.comment?document.comment:"NA"}}</td>
                  </ng-container>
    
                  <!-- Header Row -->
                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <!-- Data Rows -->
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
              </section>
              <mat-paginator style="font-size: 13px;" [pageSizeOptions]="[5, 10, 20 ]"
              showFirstLastButtons [pageSize]="10"
              aria-label="Select page of periodic elements">
             </mat-paginator>
          </div>
        </div>
       </div>
    </div>
</div>

<!-- comments modal -->
<div class="modal" id="approveCommentModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Approval comment</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <textarea rows="5" cols="40"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- comments modal -->
<div class="modal" id="rejectCommentModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Rejection comment</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <textarea rows="5" cols="40"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="documentView" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Document View</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>*  Check the user details and the document details</p>
        <br/>
        <div style="display: flex;">
          <div>
            <h3>Details</h3>
            <p>Number : {{documentNumber}}</p>
          </div>
          <div>
            <img [src]="'data:image/png/jpg/jpeg;base64,'+binaryData" width="100px" height="100px"
            alt="document" />
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary">Save changes</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
